# Toxi-proxy and toxics queries and mutations
:!revnumber:
:source-highlighter: highlight.js


== Get affiliations, including toxi-proxy and toxics.
[source,graphql]
include::queries/getApplicationDeploymentWithToxics.graphql[]

== Get affiliations, specific affiliation/application/environment - combo
[source,graphql]
include::queries/getApplicationDeploymentAndToxiProxyWithRef.graphql[]

== Add toxic to an existing toxi-proxy
[source,graphql]
include::mutations/addToxiProxyToxic.graphql[]

sample query variables (i.e. AddOrUpdateToxiProxyInput):
[source,json]
{
  "input": {
    "affiliation": "my_aff",
    "environment": "my_env",
    "application": "my_app",
    "toxiProxy":
      {
        "name": "test",
        "toxics":
          {
            "name": "latency_downstream_1",
            "type": "latency",
            "stream": "downstream",
            "toxicity": 1,
						"attributes": [
              {
                "key": "latency",
                "value": 1234
              },
              {
                "key": "jitter",
                "value": 300
              }
            ]
          }
      }
  }
}

link:index.html[Back]